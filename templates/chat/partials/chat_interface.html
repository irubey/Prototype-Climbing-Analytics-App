{% macro chat_interface() %}
<div class="chat" id="chat_interface">
    <div class="chat__header">
        <div class="chat__header-content">
            <h3 class="chat__title">Chat with Sage</h3>
            <button class="btn btn--icon" id="new_chat" title="New chat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"></path>
                </svg>
            </button>
        </div>
    </div>

    <div class="chat__messages" id="chat_messages">
        <div class="chat__welcome">
            <h1 class="chat__welcome-title">What can I help with?</h1>

            <div class="suggested-prompts">
                <button class="prompt-button">
                    <span class="prompt-icon">ğŸ¯</span>
                    <span class="prompt-title">Set climbing goals</span>
                </button>
                <button class="prompt-button">
                    <span class="prompt-icon">ğŸ“Š</span>
                    <span class="prompt-title">Analyze my progress</span>
                </button>
                <button class="prompt-button">
                    <span class="prompt-icon">ğŸ’ª</span>
                    <span class="prompt-title">Get technique tips</span>
                </button>
                <button class="prompt-button">
                    <span class="prompt-icon">ğŸ”ï¸</span>
                    <span class="prompt-title">Plan grade progression</span>
                </button>
            </div>
        </div>

        <div class="chat__message-list" id="message_list">
            <!-- Messages will be dynamically inserted here -->
        </div>
    </div>

    <div class="loading-indicator" id="loading_spinner">
        <div class="loading-indicator__content">
            <div class="loading-indicator__spinner"></div>
            <div class="loading-indicator__text">Sage is thinking...</div>
        </div>
    </div>

    <div class="chat__input">
        <form id="chat_form" class="chat-form">
            <div class="input-group">
                <textarea id="user_prompt" name="user_prompt" class="form-control form-control--chat"
                    placeholder="Message Sage..." rows="1" data-min-rows="1" data-max-rows="5"
                    autocomplete="off"></textarea>
                <button type="submit" class="btn btn--primary btn--send" disabled>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="send-icon">
                        <path d="M12 19l-5-5m0 0l5-5m-5 5h12" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                </button>
            </div>
        </form>
    </div>
</div>

<template id="message_template">
    <div class="chat__message">
        <div class="chat__message-avatar">
            <img src="" alt="">
        </div>
        <div class="chat__message-content">
            <div class="chat__message-text"></div>
            <div class="chat__message-metadata">
                <span class="chat__message-time"></span>
            </div>
        </div>
    </div>
</template>
{% endmacro %}