{% extends "base.html" %}
{% block title %}Register | SendSage{% endblock %}

{% block content %}
<div class="auth-container">
  <h2 class="auth-title">Create Your SendSage Account</h2>
  
  <form method="POST" class="auth-form">
    {{ form.hidden_tag() }}
    
    <div class="form-group">
      {{ form.email.label }}
      {{ form.email(class="form-control", placeholder="your.email@example.com") }}
      {% for error in form.email.errors %}
        <small class="form-error">{{ error }}</small>
      {% endfor %}
    </div>

    <div class="form-group">
      {{ form.username.label }}
      {{ form.username(class="form-control", placeholder="Choose a display name") }}
      {% for error in form.username.errors %}
        <small class="form-error">{{ error }}</small>
      {% endfor %}
    </div>

    <div class="form-group">
      {{ form.mtn_project_profile_url.label }}
      {{ form.mtn_project_profile_url(
          class="form-control",
          pattern="https://www.mountainproject.com/user/[0-9]+/[a-zA-Z0-9-]+",
          placeholder="https://www.mountainproject.com/user/1234567/john-doe"
      ) }}
      <small class="form-text text-muted">
        We'll use this to analyze your climbing history
      </small>
      {% for error in form.mtn_project_profile_url.errors %}
        <small class="form-error">{{ error }}</small>
      {% endfor %}
    </div>

    <div class="form-group">
      {{ form.password.label }}
      {{ form.password(class="form-control", placeholder="At least 8 characters") }}
      {% for error in form.password.errors %}
        <small class="form-error">{{ error }}</small>
      {% endfor %}
    </div>

    <div class="form-group">
      {{ form.confirm_password.label }}
      {{ form.confirm_password(class="form-control", placeholder="Re-enter your password") }}
      {% for error in form.confirm_password.errors %}
        <small class="form-error">{{ error }}</small>
      {% endfor %}
    </div>

    <div class="form-group terms-group">
      <input type="checkbox" id="terms" name="terms" required>
      <label for="terms">
        I agree to the <a href="{{ url_for('main.terms_and_privacy') }}">Terms & Privacy</a>
      </label>
    </div>

    <button type="submit" class="btn btn-primary auth-submit">
      <i class="fas fa-user-plus"></i> Create Account
    </button>

    <div class="auth-alt-options">
      Already have an account? 
      <a href="{{ url_for('main.login') }}">Log in here</a>
    </div>
  </form>
</div>

<script>
function validatePassword() {
  const password = document.getElementById('password').value;
  const confirmPassword = document.getElementById('confirm_password').value;
  
  if (password !== confirmPassword) {
    alert('Passwords do not match!');
    return false;
  }
  
  if (password.length < 8) {
    alert('Password must be at least 8 characters!');
    return false;
  }
  
  return true;
}
</script>

<style>
.auth-container {
  max-width: 500px;
  margin: 2rem auto;
  padding: 2rem;
  background: var(--background-light);
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.auth-title {
  text-align: center;
  margin-bottom: 1.5rem;
  color: var(--primary-color);
}

.auth-form .form-group {
  margin-bottom: 1.2rem;
}

.form-control {
  width: 100%;
  padding: 0.8rem;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  margin-top: 0.4rem;
}

.terms-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 1.5rem 0;
}

.auth-submit {
  width: 100%;
  padding: 1rem;
  font-size: 1.1rem;
}

.auth-alt-options {
  text-align: center;
  margin-top: 1.5rem;
  color: var(--text-muted);
}

.auth-alt-options a {
  color: var(--primary-color);
  text-decoration: none;
}

.fa-info-circle {
  color: var(--text-muted);
  font-size: 0.9rem;
  cursor: help;
}
</style>
{% endblock %}